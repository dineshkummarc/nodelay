<!DOCTYPE html>
<html>
    <head>
        <title>Nodelay</title>
        <script type="text/javascript">
        
        window.onload = function() {

            var url = "ws://"+document.location.host+":8080";
            
            console.log(url);
            
            var messages = document.getElementById('messages');
            
            var ws = new WebSocket(url);
            
            ws.onmessage = function(evt) {
                var li = document.createElement('li');
                li.innerHTML = evt.data;
                messages.appendChild(li);
                if (messages.children.length > 20) {
                    messages.removeChild(messages.firstChild);
                }
            }
            
        }
        
        </script>
    </head>
    <body>
        <h1>Nodelay!</h1>
        <a href="http://nodeknockout.com/teams/nodelay" target="nko" title="Help me win Node.js KO!"><img style="position: fixed; top: 5px; right: 5px; border: 0px;" src="http://nodeknockout.com/images/voteko.png" alt="Help me win Node.js KO!" /></a>
        <ul id="messages">
        </ul>
        <img src="images/nodelayKnockout.jpg">
    </body>
</html>